import{ae as M,aJ as O,ag as R,bZ as $,af as V,d as k,ah as j,b7 as g,b_ as q,b$ as z,l as x,c as B,b8 as G,Q as J,y as L,bV as Q,bW as U,c0 as Y,a5 as Z,o as D,a as F,m as K,aj as X,ak as C,i as c,ap as A,al as ee,as as te}from"./index--8fEwDZf.js";const oe=M({zIndex:{type:O([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),ae={scroll:({scrollTop:a,fixed:v})=>R(a)&&$(v),[V]:a=>$(a)},H="ElAffix",se=k({name:H}),le=k({...se,props:oe,emits:ae,setup(a,{expose:v,emit:b}){const o=a,E=j("affix"),r=g(),d=g(),s=g(),{height:u}=q(),{height:p,width:_,top:w,bottom:y,update:m}=z(d,{windowScroll:!1}),i=z(r),t=x(!1),S=x(0),f=x(0),I=B(()=>({height:t.value?`${p.value}px`:"",width:t.value?`${_.value}px`:""})),P=B(()=>{if(!t.value)return{};const e=o.offset?G(o.offset):0;return{height:`${p.value}px`,width:`${_.value}px`,top:o.position==="top"?e:"",bottom:o.position==="bottom"?e:"",transform:f.value?`translateY(${f.value}px)`:"",zIndex:o.zIndex}}),N=()=>{if(!s.value)return;S.value=s.value instanceof Window?document.documentElement.scrollTop:s.value.scrollTop||0;const{position:e,target:h,offset:l}=o,T=l+p.value;if(e==="top")if(h){const n=i.bottom.value-T;t.value=l>w.value&&i.bottom.value>0,f.value=n<0?n:0}else t.value=l>w.value;else if(h){const n=u.value-i.top.value-T;t.value=u.value-l<y.value&&u.value>i.top.value,f.value=n<0?-n:0}else t.value=u.value-l<y.value},W=()=>{m(),b("scroll",{scrollTop:S.value,fixed:t.value})};return J(t,e=>b("change",e)),L(()=>{var e;o.target?(r.value=(e=document.querySelector(o.target))!=null?e:void 0,r.value||Q(H,`Target does not exist: ${o.target}`)):r.value=document.documentElement,s.value=U(d.value,!0),m()}),Y(s,"scroll",W),Z(N),v({update:N,updateRoot:m}),(e,h)=>(D(),F("div",{ref_key:"root",ref:d,class:C(c(E).b()),style:A(c(I))},[K("div",{class:C({[c(E).m("fixed")]:t.value}),style:A(c(P))},[X(e.$slots,"default")],6)],6))}});var ne=ee(le,[["__file","affix.vue"]]);const ue=te(ne);export{ue as E};
